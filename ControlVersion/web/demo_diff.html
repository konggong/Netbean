<!DOCTYPE html>
<html>
    <head>
        <meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
        <title>Diff</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
        <script src="js/diff_match_patch.js"></script>
        <script>
            //$(document).ready(function() {
            function loadFile(i) {
                //alert(i);
                //prompt("#date" + i + "| Data : ",$("#data"+i).serialize());
                //return;
                $.ajax({
                    type: "post",
                    data: $("#data" + i).serialize(),
                    url: "./jsp/getFile.jsp",
                    success: function(data) {
                        $("#text" + i).val(data.trim());
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        alert("Error : " + errorThrown.toString());
                    }
                });
            }
//----------------------------------------------------
            var dmp = new diff_match_patch();
            function launch() {
                var text1 = document.getElementById('text1').value;
                var text2 = document.getElementById('text2').value;
                dmp.Diff_Timeout = parseFloat(1);
                dmp.Diff_EditCost = 4;
                var ms_start = (new Date()).getTime();
                var d = dmp.diff_main(text1, text2);
                var ms_end = (new Date()).getTime();
                dmp.diff_cleanupSemantic(d);
                var ds = dmp.diff_prettyHtml(d);
                document.getElementById('outputdiv').innerHTML = ds + '<br><br>Time: ' + (ms_end - ms_start) / 1000 + 's';
            }
            //});
        </script>        
        <style type="text/css">
            .c1 {
                font-family: "Courier New",Courier,monospace;
            }
            textarea.c1 {
                width: 100%;                
            }
            div.b1 {
                border:1px solid red;
                width: 100%;
                position: fixed; 
                /*
                left: 0px;
                top: 0px;
                background-color: black;
                */
                z-index:-1;
            }
            div.c1 {
                border:1px solid green;
                width: 50%;
                display: table;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <h1>Diff Program</h1>
        <table width="100%">
            <tr>
                <td width="50%">
                    <form action="/" id="data1">
                        <h3>
                            Program 1 : 
                            <select name="host">
                                <option value="10.22.13.63">kcc</option>
                            </select>
                            <input type="hidden" name="port" value="22">
                            <input type="hidden" name="username" value="pww">
                            <input type="hidden" name="password" value="pww">
                            <input type="text" name="filepath" value="/u/4gl/client/src/kfr077.4gl">
                            <input type="button" onclick="loadFile(1)" value="Load">

                        </h3>
                    </form>
                    <textarea id="text1" class="c1" rows="10" cols="20">KONG</textarea>
                </td>
                <td width="50%">
                    <form action="/" id="data2">
                        <h3>
                            Program 2 : 
                            <select  name="host">
                                <option value="10.22.13.63">kcc</option>
                            </select>
                            <input type="hidden" name="port" value="22">
                            <input type="hidden" name="username" value="pww">
                            <input type="hidden" name="password" value="pww">
                            <input type="text" name="filepath" value="/u/4gl/client/src/kfr077.4gl.pww">
                            <input type="button" onclick="loadFile(2)" value="Load">
                        </h3>
                    </form>
                    <textarea id="text2" class="c1" rows="10" cols="20">KONGGONG</textarea>
                </td>
            </tr>
        </table>

        <p><input type="button" onclick="launch()" value="Compute Diff"></p>
        <div class="b1"><div class="c1" id="outputdiv"></div></div>
    </body>
</html>